<!DOCTYPE html>
<html class="dark" lang="es">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Ranking Global - Oscars 2026</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700;800&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#f2d00d",
                        "background-light": "#f8f8f5",
                        "background-dark": "#221f10",
                        "surface-dark": "#2d2915",
                        "border-gold": "#494322",
                        "accent-gold": "#cbc290"
                    },
                    fontFamily: { "display": ["Be Vietnam Pro", "sans-serif"] },
                },
            },
        }
    </script>
    <style>
        body { font-family: 'Be Vietnam Pro', sans-serif; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-white min-h-screen flex flex-col">

<header class="flex flex-col md:flex-row items-center justify-between border-b border-border-gold px-6 md:px-10 py-4 bg-background-dark sticky top-0 z-50 gap-4">
    <div class="flex items-center gap-8 w-full md:w-auto justify-between md:justify-start">
        <a href="{% url 'home' %}" class="flex items-center gap-2 text-primary hover:scale-105 transition-transform">
            <span class="material-symbols-outlined text-3xl">movie_filter</span>
            <h2 class="text-white text-xl font-extrabold uppercase tracking-tight">Oscars <span class="text-primary">2026</span></h2>
        </a>
        
        <nav class="hidden md:flex items-center gap-6">
            <a class="text-primary text-sm font-bold border-b-2 border-primary pb-1 cursor-default" href="#">Ranking</a>
            <a class="text-accent-gold hover:text-white transition-colors text-sm font-medium" href="{% url 'home' %}">Mis Predicciones</a>
            <a class="text-accent-gold hover:text-white transition-colors text-sm font-medium" href="{% url 'home' %}">Categorías</a>
        </nav>
    </div>

    <div class="flex flex-1 justify-end gap-4 items-center w-full md:w-auto">
        <form method="GET" class="w-full md:max-w-xs">
            <div class="flex items-center rounded-lg border border-border-gold bg-surface-dark overflow-hidden focus-within:ring-1 focus-within:ring-primary">
                <div class="pl-3 text-accent-gold">
                    <span class="material-symbols-outlined text-[20px]">search</span>
                </div>
                <input type="text" name="q" value="{{ request.GET.q }}" 
                       class="w-full bg-transparent border-none text-white placeholder-accent-gold/50 text-sm focus:ring-0" 
                       placeholder="Buscar amigo...">
            </div>
        </form>

        <div class="hidden md:flex items-center gap-3 pl-4 border-l border-border-gold">
            <div class="text-right">
                <p class="text-xs text-accent-gold font-bold uppercase">Hola,</p>
                <p class="text-sm font-bold text-white">{{ request.user.username }}</p>
            </div>
            <div class="size-10 rounded-full bg-[#221f10] border border-primary flex items-center justify-center text-primary font-bold text-lg">
                {{ request.user.username|slice:":1"|upper }}
            </div>
        </div>
    </div>
</header>

<main class="flex-1 flex flex-col items-center px-4 py-10 w-full max-w-[1000px] mx-auto">
    
    <div class="text-center mb-10">
        <h1 class="text-white tracking-tight text-3xl md:text-5xl font-extrabold uppercase italic mb-2">Ranking Global</h1>
        <p class="text-accent-gold text-sm md:text-lg font-medium max-w-2xl mx-auto">
            Seguí la carrera hacia los Premios de la Academia. <br>Competí en tiempo real contra amigos y fanáticos del cine.
        </p>
    </div>

    <div class="w-full mb-8 border-b border-border-gold flex justify-center gap-8">
        <button class="border-b-[3px] border-primary text-white pb-3 px-4 font-bold uppercase tracking-widest text-sm">Global</button>
        <button class="border-b-[3px] border-transparent text-accent-gold pb-3 px-4 font-bold uppercase tracking-widest text-sm hover:text-white transition">Amigos</button>
    </div>

    <div class="w-full flex flex-col gap-3">
        {% for jugador in usuarios %}
        <div class="grid grid-cols-12 gap-2 md:gap-4 px-4 py-4 items-center rounded-xl border border-border-gold/40 bg-surface-dark/30 hover:bg-surface-dark hover:border-primary/50 transition-all group {% if request.user == jugador %}bg-primary/10 border-primary{% endif %}">
            
            <div class="col-span-2 md:col-span-1 text-center">
                {% if forloop.counter == 1 %}
                    <span class="material-symbols-outlined text-primary text-3xl drop-shadow-[0_0_10px_rgba(242,208,13,0.5)]">emoji_events</span> 
                {% elif forloop.counter == 2 %}
                    <span class="text-2xl font-black text-gray-300">#2</span>
                {% elif forloop.counter == 3 %}
                    <span class="text-2xl font-black text-[#cd7f32]">#3</span> 
                {% else %}
                    <span class="text-xl font-bold text-gray-500">#{{ forloop.counter }}</span>
                {% endif %}
            </div>

            <div class="col-span-7 md:col-span-6 flex items-center gap-4">
                <div class="size-10 rounded-full bg-background-dark border border-border-gold flex items-center justify-center text-accent-gold font-bold shadow-lg">
                    {{ jugador.username|slice:":1"|upper }}
                </div>
                <div class="flex flex-col">
                    <p class="text-white font-bold text-base md:text-lg leading-none group-hover:text-primary transition-colors">
                        {{ jugador.username }} 
                        {% if request.user == jugador %} <span class="bg-primary text-black text-[10px] px-1.5 py-0.5 rounded ml-2 uppercase font-black">Tú</span> {% endif %}
                    </p>
                    <p class="text-[10px] text-gray-500 uppercase tracking-widest mt-1 font-bold">
                        {% if forloop.counter == 1 %}Líder Actual{% else %}Competidor{% endif %}
                    </p>
                </div>
            </div>

            <div class="col-span-3 md:col-span-3 text-center hidden md:block">
                <span class="bg-black/30 px-3 py-1 rounded-full text-xs font-bold text-accent-gold border border-border-gold/50">
                    {{ jugador.aciertos }} aciertos
                </span>
            </div>

            <div class="col-span-3 md:col-span-2 text-right pr-2">
                <span class="text-2xl font-black text-primary">{{ jugador.aciertos }}</span>
                <span class="text-[9px] block text-accent-gold/60 font-bold uppercase tracking-wider">PUNTOS</span>
            </div>

        </div>
        {% empty %}
        <div class="text-center py-12 border border-dashed border-border-gold rounded-xl">
            <span class="material-symbols-outlined text-4xl text-gray-600 mb-2">search_off</span>
            <p class="text-gray-500">No se encontraron jugadores.</p>
            {% if request.GET.q %}
            <a href="{% url 'leaderboard' %}" class="text-primary hover:underline text-sm mt-2 inline-block">Borrar búsqueda</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>

</main>

<footer class="border-t border-border-gold bg-surface-dark py-8 text-center mt-auto">
    <p class="text-accent-gold/40 text-xs uppercase tracking-widest">© 2026 Prode Oscars</p>
</footer>

</body>
</html>